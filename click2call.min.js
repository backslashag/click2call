// click2call, activates phone number on smartphones
// version: 1.2.2
var phonenumber={defaults:{country:"ch",landwahl:"+41",linktitle:"",linkclass:"",regexp:"",excluderaw:"",excludeint:"",countryDefinitions:""},init:function(c){var a;if(c)for(a in c)phonenumber.defaults[a]=c[a];phonenumber.defaults.auto=!0;""!==phonenumber.defaults.regexp&&(phonenumber.defaults.auto=!1);if(""!==phonenumber.defaults.countryDefinitions){var b;if(phonenumber.defaults.countryDefinitions)for(b in phonenumber.defaults.countryDefinitions)phonenumber.countryDefinitions[b]=phonenumber.defaults.countryDefinitions[b]}phonenumber.defaults.excluderaw=
phonenumber.defaults.excluderaw.split(",");phonenumber.defaults.excludeint=phonenumber.defaults.excludeint.split(",");phonenumber.defaults.country=phonenumber.defaults.country.split(",");phonenumber._linkstring="";""!==phonenumber.defaults.linktitle&&(phonenumber._linkstring+="title='"+phonenumber.defaults.linktitle+"'");""!==phonenumber.defaults.linkclass&&(phonenumber._linkstring+="class='"+phonenumber.defaults.linkclass+"'");return this},countryDefinitions:{ch:{regex:[/([0][1-9][0-9](\s|)[0-9][0-9][0-9](\s|)[0-9][0-9](\s|)[0-9][0-9])|(([0][0]|\+)[1-9][0-9](\s|)[0-9][0-9](\s|)[0-9][0-9][0-9](\s|)[0-9][0-9](\s|)[0-9][0-9])/g],
landwahl:"+41"}},_insertAnchor:function(c,a,b,e){var d=c.node.nodeValue,f=d.indexOf(a);a=f+a.length;c.node.nodeValue=d.substring(0,f);f=document.createElement("a");f.innerHTML=e;f.href=b;f.title=phonenumber.defaults.linktitle;f.className=phonenumber.defaults.linkclass;c.parent.insertBefore(f,c.node.nextSibling);b=document.createTextNode(d.substring(a));c.parent.insertBefore(b,f.nextSibling);c.node=b},_processNode:function(c,a,b){for(var e=0;e<a.length;e++)var d=a[e];d&&0>phonenumber.defaults.excluderaw.indexOf(d)&&
(a=d.replace(/\(0\)/g,""),a=a.replace(/[^0-9\+]/g,""),"0"==a.substr(0,1)&&(a=b+a.substr(1,a.length)),b.length&&"+"!=a.substr(0,1)&&(a=b+a),0>phonenumber.defaults.excludeint.indexOf(a)&&phonenumber._insertAnchor(c,d,"tel:"+a,d))},_getChildTextNodes:function(c){for(var a=[],b=0;b<c.childNodes.length;b++){var e=c.childNodes[b],d=e.nodeName.toLowerCase();"script"!==d&&"a"!==d&&(3===e.nodeType&&e.nodeValue.match(/\d+/)?a.push({node:e,parent:c}):1===e.nodeType&&(a=a.concat(phonenumber._getChildTextNodes(e))))}return a},
activate:function(){for(var c=phonenumber._getChildTextNodes(document.body),a=0;a<c.length;a++){var b=c[a],e=b.node.nodeValue;if(e)if(phonenumber.defaults.auto)for(var d=0;d<phonenumber.defaults.country.length;d++){if("undefined"!=typeof phonenumber.countryDefinitions[phonenumber.defaults.country[d]])for(var f=0;f<phonenumber.countryDefinitions[phonenumber.defaults.country[d]].regex.length;f++)if(g=phonenumber.countryDefinitions[phonenumber.defaults.country[d]].regex[f],g=e.match(g))h=phonenumber.countryDefinitions[phonenumber.defaults.country[d]].landwahl,
phonenumber._processNode(b,g,h)}else{var g=phonenumber.defaults.regexp;if(g=e.match(g)){var h=phonenumber.countryDefinitions.landwahl;phonenumber._processNode(b,g,h)}}}}};